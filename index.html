<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>D√©mo API Imagino</title>
</head>
<body>
    <h1>D√©mo Imagino API üöÄ</h1>

    <button id="signup">Inscription</button>
    <button id="purchase">Achat</button>
    <button id="cart-abandon">Panier abandonn√©</button>

    <div id="result"></div>

    <script>
    const resultDiv = document.getElementById('result');

    async function sendEvent(action) {
        try {
            const response = await fetch("https://demo-api.imagino.com/event", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({
                    event: action,
                    userId: "user_demo_123"
                })
            });

            if(response.ok) {
                const data = await response.json();
                resultDiv.innerHTML = `<pre>‚úÖ Succ√®s : ${JSON.stringify(data, null, 2)}</pre>`;
            } else {
                resultDiv.innerHTML = `<pre>‚ùå Erreur : ${response.statusText}</pre>`;
            }
        } catch (error) {
            resultDiv.innerHTML = `<pre>‚ùå Erreur : ${error.message}</pre>`;
        }
    }

    document.getElementById('signup').onclick = () => sendEvent('signup');
    document.getElementById('purchase').onclick = () => sendEvent('purchase');
    document.getElementById('cart-abandon').onclick = () => sendEvent('cart_abandon');
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Votre Panier 🛒</title>
</head>
<body>

<header>
    <h1>Votre Panier 🛒</h1>
</header>

<div class="cart-container">
    <table>
        <thead>
            <tr>
                <th>Produit</th>
                <th>Nom</th>
                <th>Prix (€)</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="panierItems"></tbody>
        <tfoot>
            <tr>
                <td colspan="2"><strong>Total</strong></td>
                <td id="totalPrix"></td>
                <td><button onclick="viderPanier()">🗑️ Vider mon panier</button></td>
            </tr>
        </tfoot>
    </table>
    <button onclick="window.location.href='index.html'">⬅️ Retour</button>
    <button onclick="alert('Commande confirmée 🎉')">✅ Confirmer</button>
</div>

<hr>

<!-- Inscription Newsletter -->
<div style="text-align:center; padding:20px; background:#fff;">
    <h2>Inscription à la newsletter 📧</h2>
    <form id="newsletterForm">
        <input type="email" placeholder="Votre email" id="email" required>
        <button type="button" onclick="inscrireUtilisateur()">S'inscrire</button>
    </form>
    <p id="messageValidation"></p>
</div>

<footer>
    <p>© Imagino – <a href="#">Mentions légales</a></p>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function() {
    let panier = JSON.parse(localStorage.getItem('panier') || '[]');
    let container = document.getElementById('panierItems');
    let total = 0;

    function afficherPanier() {
        container.innerHTML = "";
        total = 0;
        panier.forEach((p, index) => {
            total += p.prix;
            container.innerHTML += `<tr>
                <td><img src="${p.image}" style="width:50px;"></td>
                <td>${p.nom}</td>
                <td>${p.prix}€</td>
                <td><button onclick="supprimerArticle(${index})">❌</button></td>
            </tr>`;
        });
        document.getElementById('totalPrix').innerText = total + "€";
    }

    function viderPanier() {
        localStorage.removeItem('panier');
        location.reload();
    }

    function supprimerArticle(index) {
        panier.splice(index, 1);
        localStorage.setItem('panier', JSON.stringify(panier));
        afficherPanier();
    }

    afficherPanier();
});
</script>

</body>
</html>

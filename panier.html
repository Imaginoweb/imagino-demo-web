<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Panier Imagino ðŸ›’</title>
    <style>
        body { font-family: Arial, sans-serif; margin:0; padding:0; background-color: #f4f7fc; }
        header, footer { padding: 20px; text-align: center; background: #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .container { padding: 20px; text-align: center; }
        button { padding: 8px 12px; cursor: pointer; background-color: #5c67f2; color: white; border: none; border-radius: 4px; }
        button:hover { background-color: #4a54e1; }
        input { padding: 8px; margin: 5px; border-radius: 4px; border: 1px solid #ccc; }
        .optins { margin: 10px; }
        ul { list-style-type: none; padding: 0; }
        li { margin: 5px 0; padding: 5px; background: #fff; border-radius: 4px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
    </style>
</head>
<body>

<header>
    <img src="logo.png" alt="Imagino Logo" style="width: 250px;">
    <h1>Votre Panier ðŸ›’</h1>
</header>

<div class="container">
    <ul id="listePanier"></ul>
    <button onclick="viderPanier()">Vider le Panier</button>
</div>

<footer>
    <h3>Inscription Newsletter ðŸ“©</h3>
    <input type="email" id="email" placeholder="Votre Email">
    <input type="text" id="firstName" placeholder="PrÃ©nom">
    <input type="text" id="lastName" placeholder="Nom">
    <input type="text" id="telephone" placeholder="TÃ©lÃ©phone">

    <div class="optins">
        <label><input type="checkbox" id="optInEmail"> Email</label>
        <label><input type="checkbox" id="optInPush"> Push</label>
        <label><input type="checkbox" id="optInSMS"> SMS</label>
    </div>

    <button onclick="inscrireUtilisateur()">S'inscrire</button>
    <div id="output"></div>
</footer>

<script>
    const panier = JSON.parse(localStorage.getItem('panier') || '[]');

    function afficherPanier() {
        const listePanier = document.getElementById('listePanier');
        listePanier.innerHTML = '';
        panier.forEach(produit => {
            const li = document.createElement('li');
            li.textContent = produit;
            listePanier.appendChild(li);
        });
    }

    function viderPanier() {
        localStorage.removeItem('panier');
        afficherPanier();
    }

    function inscrireUtilisateur() {
        const apiKey = '2a79b8c4-b270-4a61-8b64-437ccea75586';
        const email = document.getElementById('email').value;
        const firstName = document.getElementById('firstName').value;
        const lastName = document.getElementById('lastName').value;
        const telephone = document.getElementById('telephone').value;
        const optInEmail = document.getElementById('optInEmail').checked;
        const optInPush = document.getElementById('optInPush').checked;
        const optInSMS = document.getElementById('optInSMS').checked;

        fetch(`https://francois-sandbox.saas.imagino.com/ucdapi/New_customer/2/RCU`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'X-API-KEY': apiKey },
            body: JSON.stringify({ email, firstName, lastName, telephone, optInEmail, optInPush, optInSMS })
        })
        .then(response => response.json())
        .then(() => document.getElementById('output').innerHTML = 'Inscription rÃ©ussie !');
    }

    afficherPanier();
</script>

</body>
</html>
